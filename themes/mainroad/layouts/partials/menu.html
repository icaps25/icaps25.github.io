{{- if .Site.Menus.main }}
<nav class="menu">
  <button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
    <span class="menu__btn-title" tabindex="-1">☰</span>
  </button>
  <ul class="menu__list">
    {{- $currentNode := . }}
    {{- range .Site.Menus.main }}
    {{- if .Name }}
    {{- if .HasChildren }}
    <li class="menu__item menu__dropdown{{ if or ($currentNode.IsMenuCurrent "main" .) ($currentNode.HasMenuCurrent "main" .) }} menu__item--active{{ end }}">
      <label for="{{ .Name }}" class="menu__link">
        {{ .Pre }}
        <span class="menu__text">
          {{ .Name }}</span>
        <input type="checkbox" id="{{ .Name }}">
        <span class="drop-icon">▾</span>
        {{ .Post }}
        </a>
        <ul class="submenu__list">
          <ul class="'submenu__listwrapper">
            {{ range .Children }}
            {{- if .HasChildren }}
            <li class="menu__item menu__dropdown{{ if or ($currentNode.IsMenuCurrent "main" .) ($currentNode.HasMenuCurrent "main" .) }} menu__item--active{{ end }}">
              <label for="{{ .Name }}" class="menu__link">
                {{ .Pre }}
                <span class="menu__text">
                  {{ .Name }}</span>
                <input type="checkbox" id="{{ .Name }}">
                <span class="drop-icon">▾</span>
                {{ .Post }}
                </a>
                <ul class="submenu__list">
                  {{ range .Children }}
                  <li class="menu__item{{ if or ($currentNode.IsMenuCurrent "main" .) ($currentNode.HasMenuCurrent "main" .) }} menu__item--active{{ end }}">
                    <a class="menu__link" href="{{ .URL }}">
                      {{ .Pre }}
                      <span class="menu__text">
                        {{ .Name }}</span>
                      {{ .Post }}
                    </a>
                  </li>
                  {{ end }}
                </ul>
            </li>
            {{- else }}

            <li class="menu__item{{ if or ($currentNode.IsMenuCurrent "main" .) ($currentNode.HasMenuCurrent "main" .) }} menu__item--active{{ end }}">
              <a class="menu__link" href="{{ .URL }}">
                {{ .Pre }}
                <span class="menu__text">
                  {{ .Name }}</span>
                {{ .Post }}
              </a>
            </li>
            {{ end }}
            {{ end }}
          </ul>
        </ul>
    </li>
    {{- else }}


    <li class="menu__item{{ if or ($currentNode.IsMenuCurrent "main" .) ($currentNode.HasMenuCurrent "main" .) }} menu__item--active{{ end }}">
      <a class="menu__link" href="{{ .URL }}">
        {{ .Pre }}
        <span class="menu__text">
          {{ .Name }}</span>
        {{ .Post }}
      </a>
    </li>
    {{- end }}
    {{- end }}
    {{- end }}
  </ul>
</nav>

{{ else -}}
<div class="divider"></div>
{{- end }}